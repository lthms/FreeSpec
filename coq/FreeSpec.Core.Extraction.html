<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>FreeSpec.Core.Extraction</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library FreeSpec.Core.Extraction</h1>

<div class="code">

<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">FreeSpec</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="FreeSpec.Core.Core.html#"><span class="id" title="library">Core</span></a>.<br/>

<br/>
</div>

<div class="doc">
FreeSpec has been designed from the start to be compatible with
    the extraction mechanism of Coq. That being said, this approach is
    no longer the preferred one, and we now advice to write your
    impure programs in a polymorphic monad, which is specialized in a
    <span class="inlinecode"><span class="id" title="axiom">IO</span></span>-like monad (such as the one introduced by the
    <tt>coq-simple-io</tt> package) for extraction, and <span class="inlinecode"><a class="idref" href="FreeSpec.Core.Impure.html#impure"><span class="id" title="inductive">impure</span></a></span> for formal
    verification. 
<div class="paragraph"> </div>

<a id="lab41"></a><h1 class="section">How to</h1>

<div class="paragraph"> </div>

 To get an executable program from an impure program <span class="inlinecode"><span class="id" title="var">p</span></span>
    implemented in the <span class="inlinecode"><a class="idref" href="FreeSpec.Core.Impure.html#impure"><span class="id" title="inductive">impure</span></a></span> monad parameterized by an interface
    <span class="inlinecode"><span class="id" title="var">i</span></span>, the approach is to define a function (said, <span class="inlinecode"><span class="id" title="var">main</span></span>) whose
    body is of the form <span class="inlinecode"><a class="idref" href="FreeSpec.Core.Semantics.html#run_impure"><span class="id" title="definition">run_impure</span></a></span> <span class="inlinecode"><span class="id" title="var">ocaml_sem</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span>, where <span class="inlinecode"><span class="id" title="var">ocaml_sem</span></span> is
    a semantics for <span class="inlinecode"><span class="id" title="var">i</span></span>.

<div class="paragraph"> </div>

    More precisely, for each constructor of <span class="inlinecode"><span class="id" title="var">i</span></span>, there should be an
    ocaml functions that can be called to handle it. These functions
    can be made available to Coq modules by (1) introducing an axiom,
    and (2) configuring the extraction mechanism accordingly.

<div class="paragraph"> </div>

    Once this is done, one can call <span class="inlinecode"><span class="id" title="keyword">Recursive</span></span> <span class="inlinecode"><span class="id" title="keyword">Extraction</span></span> <span class="inlinecode"><span class="id" title="var">main</span></span>. 
<div class="paragraph"> </div>

<a id="lab42"></a><h1 class="section">Extraction Configuration</h1>

<div class="paragraph"> </div>

 The extraction mechanism of Coq suffers, sadly, long standing
    bugs. These bugs prevents the extracted OCaml code to compile.
    Fortunately, these bugs can be avoided by inlining certain key
    definitions. Note that, at the time of writing this documentation,
    this approach does sadly not work with the <span class="inlinecode"><span class="id" title="keyword">Recursive</span></span> <span class="inlinecode"><span class="id" title="keyword">Extraction</span></span>
    <span class="inlinecode"><span class="id" title="var">Library</span></span> command. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Extraction</span> <span class="id" title="keyword">Inline</span> <span class="id" title="var">impure_Applicative</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>